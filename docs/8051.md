# 8051

The SMC is a 8051 microcontroller. It's an ancient and shitty design, but it gets the job done.

There's a lot of 8051 literature and tools out there already so it's up to you to find that knowledge.

## SMC gotchas

- The I/O registers, including GPIOs are different than on a "standard" 8051. See iomap.md for where they're
  located.

## 8051 assembly gotchas

- The stack grows upward rather than downward, so pushes increment the stack pointer and pops decrement it.
  If you want to alter the stack pointer to make room for additional variables, put the new variables BEFORE
  the initial stack pointer, not after it.

- You can access memory cells 000h through 07Fh directly, but addresses 080h through 0FFh are reserved for
  SFRs. To read/write memory above 080h, you need to use `mov r0,#080h` to set up a pointer to the cell you
  want to access, and then `mov @r0,#0`, for example, to change the value.
